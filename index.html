<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BoxPvP Panel</title>
<style>
body{
    margin:0;
    font-family:Arial;
    background:#111;
    color:white;
    text-align:center;
}
.container{
    padding:20px;
}
button{
    padding:10px 20px;
    margin:5px;
    border:none;
    border-radius:5px;
    cursor:pointer;
}
.vip{background:gold;color:black;}
.lvip{background:deepskyblue;}
.mvip{background:red;}
.adminpanel{
    background:#222;
    padding:15px;
    margin-top:20px;
    display:none;
}
input{
    padding:8px;
    margin:5px;
}
.leaderboard{
    margin-top:20px;
    background:#1a1a1a;
    padding:10px;
}
</style>
</head>
<body>

<div class="container" id="loginDiv">
<h2>Giriş Yap</h2>
<input type="text" id="nick" placeholder="Nick">
<input type="password" id="adminPass" placeholder="Admin Şifre (admin için)">
<br>
<button onclick="login()">Giriş</button>
</div>

<div class="container" id="panel" style="display:none;">
<h2 id="welcome"></h2>
<p>Coin: <span id="coin">0</span></p>
<p>Rank: <span id="rank">Oyuncu</span></p>

<button onclick="vote()">Oy Ver (+10 Coin)</button>
<button onclick="daily()">Günlük Ödül (+20 Coin)</button>

<h3>VIP Satın Al</h3>
<button class="vip" onclick="buyRank('VIP',50)">VIP - 50 Coin</button>
<button class="lvip" onclick="buyRank('LVIP',100)">LVIP - 100 Coin</button>
<button class="mvip" onclick="buyRank('MVIP',150)">MVIP - 150 Coin</button>

<div class="leaderboard">
<h3>Liderlik Tablosu</h3>
<div id="leaderboard"></div>
</div>

<div class="adminpanel" id="adminPanel">
<h3>ADMIN PANEL</h3>
<input type="text" id="giveNick" placeholder="Nick">
<input type="number" id="giveCoin" placeholder="Coin">
<button onclick="giveCoin()">Coin Ver</button>
</div>

</div>

<script>
let currentUser = null;
let users = JSON.parse(localStorage.getItem("users")) || {};

function save(){
    localStorage.setItem("users", JSON.stringify(users));
}

function login(){
    let nick = document.getElementById("nick").value;
    let pass = document.getElementById("adminPass").value;

    if(!nick) return alert("Nick gir");

    if(!users[nick]){
        users[nick] = {
            coin:100,
            rank:"Oyuncu",
            voted:false,
            lastDaily:0
        };
    }

    currentUser = nick;
    save();

    document.getElementById("loginDiv").style.display="none";
    document.getElementById("panel").style.display="block";
    document.getElementById("welcome").innerText="Hoşgeldin "+nick;

    if(nick==="NexLight" && pass==="sunucusifresi123"){
        document.getElementById("adminPanel").style.display="block";
    }

    update();
}

function update(){
    document.getElementById("coin").innerText=users[currentUser].coin;
    document.getElementById("rank").innerText=users[currentUser].rank;
    updateLeaderboard();
}

function vote(){
    if(users[currentUser].voted){
        alert("Zaten oy verdin!");
        return;
    }
    users[currentUser].coin+=10;
    users[currentUser].voted=true;
    save();
    update();
}

function daily(){
    let now=Date.now();
    if(now-users[currentUser].lastDaily<86400000){
        alert("Günlük aldın!");
        return;
    }
    users[currentUser].coin+=20;
    users[currentUser].lastDaily=now;
    save();
    update();
}

function buyRank(rank,price){
    if(users[currentUser].coin<price){
        alert("Yetersiz coin!");
        return;
    }
    users[currentUser].coin-=price;
    users[currentUser].rank=rank;
    save();
    update();
}

function giveCoin(){
    let nick=document.getElementById("giveNick").value;
    let coin=parseInt(document.getElementById("giveCoin").value);
    if(users[nick]){
        users[nick].coin+=coin;
        save();
        updateLeaderboard();
        alert("Coin verildi!");
    }
}

function updateLeaderboard(){
    let sorted = Object.entries(users)
        .sort((a,b)=>b[1].coin-a[1].coin);

    let html="";
    sorted.forEach(u=>{
        html+=u[0]+" - "+u[1].coin+" coin<br>";
    });

    document.getElementById("leaderboard").innerHTML=html;
}
</script>

</body>
</html>
