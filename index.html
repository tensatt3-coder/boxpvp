<script>
let votes = JSON.parse(localStorage.getItem("votes") || "[]");

function vote(){
  let mcname = document.getElementById("mcname").value.trim();
  let msg = document.getElementById("voteMsg");

  if(mcname === ""){
    msg.innerText = "Nick gir!";
    return;
  }

  // Aynı nick daha önce kullanılmış mı?
  if(votes.find(v => v.name.toLowerCase() === mcname.toLowerCase())){
    msg.innerText = "Bu nick zaten oy vermiş!";
    return;
  }

  // Basit IP kontrol (tarayıcı izi)
  let fingerprint = navigator.userAgent;

  if(votes.find(v => v.fingerprint === fingerprint)){
    msg.innerText = "Bu cihazdan zaten oy verilmiş!";
    return;
  }

  votes.push({
    name: mcname,
    fingerprint: fingerprint,
    date: new Date()
  });

  localStorage.setItem("votes", JSON.stringify(votes));

  document.getElementById("voteCount").innerText = votes.length;
  msg.innerText = "Oy kaydedildi! Vote sitesinden oy ver.";
}

window.onload = function(){
  document.getElementById("voteCount").innerText = votes.length;
}
</script>
